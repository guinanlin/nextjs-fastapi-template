---
description: 
globs: 
alwaysApply: false
---
关于创建新的数据库同步脚本的步骤为如下， 请严格执行：

1. 首先必须运行如下命令获取当前的版本号。 

   ```
   $ cd fastapi_backend; uv run alembic current
   INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
   INFO  [alembic.runtime.migration] Will assume transactional DDL.
   e7f8g9h0i1j2k3l4m5 (head)
   
   Administrator@0bhagibf-nwmGqK MINGW64 /d/github/le-chong-hang-lv/fastapi_back
   end (dty)
   $
   ```

 2. 构建alembic的数据库同步文件。写入的文件位置位于 fastapi_backend\alembic_migrations\versions 下面。写入的文件有如下的要求：

       1. 文件名例如： [402d067a8b92]_added_user_table.py 其中 [402d067a8b92] 是新的版本号，是12位的唯一码。

       2. 文件的内容要考虑 upgrade 和 downgrade

       3. 涉及到表的字段， 都是需要写描述的

       4. 写入的文件例子：

             ```
             """Add item model
             
             Revision ID: b389592974f8
             Revises: 402d067a8b92
             Create Date: 2024-12-06 17:52:50.698249
             
             """
             from typing import Sequence, Union
             
             from alembic import op
             import sqlalchemy as sa
             
             
             # revision identifiers, used by Alembic.
             revision: str = "b389592974f8"
             down_revision: Union[str, None] = "402d067a8b92"
             branch_labels: Union[str, Sequence[str], None] = None
             depends_on: Union[str, Sequence[str], None] = None
             
             
             def upgrade() -> None:
                 # ### commands auto generated by Alembic - please adjust! ###
                 op.create_table(
                     "items",
                     sa.Column("id", sa.UUID(), nullable=False),
                     sa.Column("name", sa.String(), nullable=False),
                     sa.Column("description", sa.String(), nullable=True),
                     sa.Column("quantity", sa.Integer(), nullable=True),
                     sa.Column("user_id", sa.UUID(), nullable=False),
                     sa.ForeignKeyConstraint(
                         ["user_id"],
                         ["user.id"],
                     ),
                     sa.PrimaryKeyConstraint("id"),
                 )
                 # ### end Alembic commands ###
             
             
             def downgrade() -> None:
                 # ### commands auto generated by Alembic - please adjust! ###
                 op.drop_table("items")
                 # ### end Alembic commands ###
             
             ```


4. 最后， 请给出升级 以及 降级的命令， 例如：

   ```
   升级
   $ uv run alembic upgrade head
   降级
   uv run alembic downgrade b389592974f8
   ```